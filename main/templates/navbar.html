<nav class="sticky top-0 z-50 w-full bg-white/90 backdrop-blur border-b border-slate-200">
  <!-- strip aksen tipi -->
  <div class="h-0.5 w-full bg-gradient-to-r from-[#004D98] via-[#FFCD00] to-[#A50044]"></div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Top row -->
    <div class="flex items-center justify-between h-16">
      <!-- Brand -->
      <a href="/" class="flex items-center gap-2">
        <div class="h-7 w-7 rounded-full bg-gradient-to-br from-[#004D98] to-[#A50044] ring-2 ring-[#004D98]/15"></div>
        <span class="text-lg sm:text-xl font-semibold">
          <span class="text-[#004D98]">{{ brand|default:"MessyTen" }}</span>
          <span class="text-slate-900"> {{ brand_suffix|default:"Store" }}</span>
        </span>
      </a>

      <!-- Desktop nav -->
      <div class="hidden md:flex items-center gap-8">
        <a href="#" class="text-slate-600 hover:text-slate-900 font-medium">Home</a>
        <a href="#" class="text-slate-600 hover:text-slate-900 font-medium">Shoes</a>
        <a href="#" class="text-slate-600 hover:text-slate-900 font-medium">Apparel</a>
        <a href="#" class="text-slate-600 hover:text-slate-900 font-medium">Hardware</a>
        <a href="#" class="text-slate-600 hover:text-slate-900 font-medium">Stores</a>
      </div>

      <!-- Desktop user -->
      <div class="hidden md:flex items-center gap-4">
        {% if user.is_authenticated %}
          <div class="text-right leading-tight">
            <div class="text-sm font-semibold text-slate-900">
              {{ name|default:user.username }}
            </div>
            <div class="text-xs text-slate-500">
              {{ npm|default:"240123456" }} • {{ class|default:"PBP A" }}
            </div>
          </div>
          <a href="{% url 'main:logout' %}"
             class="px-4 py-2 rounded-md bg-[#A50044] text-white font-semibold hover:brightness-110 transition">
            Logout
          </a>
        {% else %}
          <a href="{% url 'main:login' %}" class="text-[#004D98] hover:underline font-medium">Login</a>
          <a href="{% url 'main:register' %}"
             class="px-4 py-2 rounded-md bg-[#FFCD00] text-slate-900 font-semibold hover:brightness-95 transition">
            Register
          </a>
        {% endif %}
      </div>

      <!-- Mobile hamburger -->
      <button id="nav-toggle" aria-expanded="false" aria-controls="nav-menu"
              class="md:hidden inline-flex items-center justify-center p-2 text-slate-600 hover:text-slate-900">
        <span class="sr-only">Toggle menu</span>
        <svg id="icon-open" class="h-6 w-6" viewBox="0 0 24 24" fill="none">
          <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <svg id="icon-close" class="h-6 w-6 hidden" viewBox="0 0 24 24" fill="none">
          <path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile menu -->
  <div id="nav-menu" class="md:hidden hidden border-t border-slate-200 bg-white/95 backdrop-blur">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      <nav class="flex flex-col gap-4 text-slate-700 font-medium">
        <a href="#" class="py-2">Home</a>
        <a href="#" class="py-2">Shoes</a>
        <a href="#" class="py-2">Apparel</a>
        <a href="#" class="py-2">Hardware</a>
        <a href="#" class="py-2">Stores</a>
      </nav>

      <hr class="my-4 border-slate-200"/>

      {% if user.is_authenticated %}
        <div class="mb-3">
          <div class="text-slate-900 font-semibold">{{ name|default:user.username }}</div>
          <div class="text-sm text-slate-500">{{ npm|default:"240123456" }} • {{ class|default:"PBP A" }}</div>
        </div>
        <a href="{% url 'main:logout' %}" class="text-red-600 font-semibold">Logout</a>
      {% else %}
        <div class="flex items-center gap-3">
          <a href="{% url 'main:login' %}" class="text-[#004D98] hover:underline font-medium">Login</a>
          <a href="{% url 'main:register' %}"
             class="px-4 py-2 rounded-md bg-[#FFCD00] text-slate-900 font-semibold hover:brightness-95 transition">
            Register
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</nav>

<script>
  (function () {
    const btn = document.getElementById('nav-toggle');
    const menu = document.getElementById('nav-menu');
    const iconOpen = document.getElementById('icon-open');
    const iconClose = document.getElementById('icon-close');

    if (!btn || !menu) return;

    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      menu.classList.toggle('hidden');
      iconOpen.classList.toggle('hidden');
      iconClose.classList.toggle('hidden');
    });

    // Tutup menu saat tekan Escape (aksesibilitas)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !menu.classList.contains('hidden')) {
        btn.click();
      }
    });
  })();
</script>
